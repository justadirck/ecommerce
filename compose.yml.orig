version: "3.8"

services:

    spring:
        build:
            context: ./spring
        ports:
            - 8080:8080
            - 8443:8443
        networks:
            - asmd_net

    angular:
        build:
            context: ./angular
            dockerfile: dockerfile
        ports:
            - 4200:4200
        networks:
            - asmd_net

    mysql:
        build:
            context: ./mysql
            dockerfile: dockerfile    
        image: mysql:8.0
        ports:
            - 3306:3306        
        environment:
            - MYSQL_DATABASE=ecommerceapp
            - MYSQL_ROOT_PASSWORD=r00t123
        volumes:
            - db:/var/lib/mysql
            - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql

volumes:
    db:

networks:
    asmd_net:
        driver: bridge
